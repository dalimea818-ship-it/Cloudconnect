<!DOCTYPE html>
<html>
<head>
    <title>Login | CloudConnect</title>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <style>
        body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #000; margin: 0; overflow: hidden; font-family: sans-serif; }
        .bg-blob { position: absolute; width: 500px; height: 500px; border-radius: 50%; filter: blur(80px); opacity: 0.4; z-index: 1; animation: move 20s infinite alternate; }
        .blob-1 { background: #0A84FF; top: -10%; left: -10%; }
        .blob-2 { background: #5E5CE6; bottom: -10%; right: -10%; animation-delay: -10s; }
        .auth-card { width: 360px; padding: 45px; border-radius: 40px; background: rgba(255,255,255,0.05); backdrop-filter: blur(50px); border: 1px solid rgba(255,255,255,0.1); text-align: center; z-index: 10; }
        input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.08); color: white; box-sizing: border-box; outline: none; }
        .btn-main { width: 100%; padding: 15px; border-radius: 18px; border: none; background: #0A84FF; color: #fff; font-weight: 700; cursor: pointer; margin-top: 10px; }
        .social-btn { width: 100%; padding: 12px; margin-top: 10px; border-radius: 18px; border: none; display: flex; align-items: center; justify-content: center; gap: 10px; cursor: pointer; font-weight: 600; }
        @keyframes move { from { transform: translate(0,0); } to { transform: translate(100px, 100px); } }
    </style>
</head>
<body>
    <div class="bg-blob blob-1"></div><div class="bg-blob blob-2"></div>
    <div class="auth-card">
        <h1 style="color:white; letter-spacing:-2px;">CloudConnect</h1>
        <input type="email" id="email" placeholder="Email">
        <input type="password" id="password" placeholder="Password">
        <button class="btn-main" onclick="login()">Log In</button>
        <button class="social-btn" style="background:#fff;" onclick="social('google')">Google</button>
        <button class="social-btn" style="background:#24292e; color:#fff;" onclick="social('github')">GitHub</button>
    </div>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyB41nU-ULZ28LxNl8KkeE0c74WjwjyIDR4", authDomain: "cloudify-227f9.firebaseapp.com", projectId: "cloudify-227f9", storageBucket: "cloudify-227f9.firebasestorage.app", messagingSenderId: "311824033320", appId: "1:311824033320:web:d4fc507258cb544c3e771d" };
        firebase.initializeApp(firebaseConfig);
        async function sync(user) {
            const token = await user.getIdToken();
            const res = await fetch('/api/auth/firebase', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({idToken: token}) });
            if (res.ok) window.location.href = '/dashboard';
        }
        async function login() { 
            const res = await firebase.auth().signInWithEmailAndPassword(document.getElementById('email').value, document.getElementById('password').value);
            sync(res.user);
        }
        async function social(type) {
            const provider = type === 'google' ? new firebase.auth.GoogleAuthProvider() : new firebase.auth.GithubAuthProvider();
            const res = await firebase.auth().signInWithPopup(provider);
            sync(res.user);
        }
    </script>
</body>
</html>
